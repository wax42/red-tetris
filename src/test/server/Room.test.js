import Room from "../../server/Room";
import _ from "lodash";

const gridEmpty = [
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."],
  [".", ".", ".", ".", ".", ".", ".", ".", ".", "."]
];

describe("SERVER/ROOM.JS", () => {
  it("should create a Room instance", () => {
    const addPlayer = jest.fn();
    const name = "room";
    const playerName = "player1";
    const clientSocket = {
      id: "123",
      on: jest.fn(),
      join: jest.fn()
    };
    const room = new Room(name, playerName, clientSocket);
    const res = {
      name,
      admin: clientSocket.id,
      game: null,
      players: [
        {
          score: 0,
          name: "player1",
          room: {},
          roomName: "room",
          id: "123",
          socket: {
            id: "123",
            on: jest.fn(),
            join: jest.fn()
          },
          grid: _.cloneDeep(gridEmpty),
          lose: false
        }
      ]
    };
    expect(room.name).toEqual(res.name);
    expect(room.playerName).toEqual(res.playerName);
    expect(room.admin).toEqual(res.admin);
    // expect(room.players).toEqual(res.players);
  });
});
